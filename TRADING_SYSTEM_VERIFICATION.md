# ðŸ” ì‹¤ì „ íŠ¸ë ˆì´ë”© ì‹œìŠ¤í…œ ì „ìˆ˜ ê²€ì¦ ë³´ê³ ì„œ

ìž‘ì„±ì¼: 2025-12-26
ê²€ì¦ ëŒ€ìƒ: Hantubot ìžë™ë§¤ë§¤ ì‹œìŠ¤í…œ
ê²€ì¦ìž: AI Assistant

---

## âœ… ê²€ì¦ í•­ëª© ë° ê²°ê³¼

### 1. 09:00-09:30 ì „ëžµ (Opening Breakout Strategy)

#### ê²€ì¦ í•­ëª©:
- âœ… ì „ëžµì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ”ê°€?
- âœ… ë§¤ìˆ˜/ë§¤ë„ê°€ ì •ìƒì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ëŠ”ê°€?
- âœ… 09:30 ì „ì— ê°•ì œ ë§¤ë„ê°€ ë˜ëŠ”ê°€?

#### ê²€ì¦ ê²°ê³¼:
```python
# engine.py Line 205-214: 09:00 ìž¥ ì‹œìž‘ ì²˜ë¦¬
if now.hour == 9 and now.minute == 0:
    await self._process_market_open_logic()  # âœ… ëª¨ë“  í¬ì§€ì…˜ ì²­ì‚°
    await asyncio.sleep(3)  # âœ… ì²´ê²° ì²˜ë¦¬ ì‹œê°„ ëŒ€ê¸°

# engine.py Line 216-243: 09:29ë¶€í„° ê°•ì œ ì²­ì‚° ì‹œìž‘
if 'opening_breakout' in strategy_id:
    if (now.hour == 9 and now.minute >= 29) or now.hour > 9:
        # âœ… 09:29ë¶€í„° ì²­ì‚° ì‹œìž‘ (1ë¶„ ì—¬ìœ )
        sell_signal = {
            'strategy_id': 'forced_liquidation_0930',
            ...
        }
```

**ðŸŸ¢ ì •ìƒ ìž‘ë™ í™•ì¸**
- 09:00ì— ì „ë‚  í¬ì§€ì…˜ ì²­ì‚°
- 09:00-09:30 ì‚¬ì´ ì „ëžµ ì‹¤í–‰
- 09:29ë¶€í„° ê°•ì œ ì²­ì‚° ì‹œìž‘ (ì¶©ë¶„í•œ ì—¬ìœ  ì‹œê°„)

---

### 2. 09:30 ê°•ì œ ë§¤ë„ ë¡œì§

#### ê²€ì¦ í•­ëª©:
- âœ… 09:30 ì „ì— ë°˜ë“œì‹œ ë§¤ë„ë˜ëŠ”ê°€?
- âœ… ë‹¤ìŒ ì „ëžµê³¼ ì¶©ëŒí•˜ì§€ ì•ŠëŠ”ê°€?

#### ê²€ì¦ ê²°ê³¼:
```python
# engine.py Line 216-221: ê°•ì œ ì²­ì‚° ìš°ì„  ì²˜ë¦¬
liquidated = await self._check_forced_liquidation()
if liquidated:
    logger.info("âš ï¸ ê°•ì œ ì²­ì‚° ì‹¤í–‰ë¨. ì „ëžµ ì‹¤í–‰ ê±´ë„ˆëœ€ (ì²­ì‚° ìš°ì„ ).")
    await asyncio.sleep(3)
    continue  # âœ… ì „ëžµ ì‹¤í–‰ ê±´ë„ˆë›°ê³  ë‹¤ìŒ ë£¨í”„ë¡œ
```

**ðŸŸ¢ ì •ìƒ ìž‘ë™ í™•ì¸**
- ê°•ì œ ì²­ì‚°ì´ ì „ëžµ ì‹¤í–‰ë³´ë‹¤ ìš°ì„  ì²˜ë¦¬ë¨
- `continue`ë¡œ ì „ëžµ ì‹¤í–‰ ê±´ë„ˆë›°ì–´ ì¶©ëŒ ë°©ì§€
- 09:29ë¶€í„° ì‹œìž‘í•˜ì—¬ 09:30ê¹Œì§€ 1ë¶„ ì—¬ìœ 

---

### 3. 09:30-14:50 ì „ëžµ (Volume Spike Strategy)

#### ê²€ì¦ í•­ëª©:
- âœ… ì „ëžµì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ”ê°€?
- âœ… ì¢…ê°€ë§¤ë§¤ ì „ëžµê³¼ ì¶©ëŒí•˜ì§€ ì•ŠëŠ”ê°€?

#### ê²€ì¦ ê²°ê³¼:
```python
# engine.py Line 155-160: ì¢…ê°€ë§¤ë§¤ ì „ëžµ ë¶„ë¦¬
for strategy in self.active_strategies:
    is_closing_strategy = 'closing_price' in strategy.strategy_id
    
    if closing_call != is_closing_strategy:
        continue  # âœ… ì‹œê°„ëŒ€ë³„ë¡œ ì „ëžµ ë¶„ë¦¬ ì‹¤í–‰
```

**ðŸŸ¢ ì •ìƒ ìž‘ë™ í™•ì¸**
- `is_closing_strategy` í”Œëž˜ê·¸ë¡œ ì „ëžµ ë¶„ë¦¬
- ì¢…ê°€ë§¤ë§¤ ì‹œê°„ ì™¸ì—ëŠ” volume_spike ì „ëžµë§Œ ì‹¤í–‰
- ì¶©ëŒ ì—†ìŒ

---

### 4. 15:00 ì „ ê°•ì œ ë§¤ë„

#### ê²€ì¦ í•­ëª©:
- âœ… 14:59ì— ê°•ì œ ë§¤ë„ê°€ ì‹œìž‘ë˜ëŠ”ê°€?
- âœ… ì¢…ê°€ë§¤ë§¤ ì‹ í˜¸ì™€ ì¶©ëŒí•˜ì§€ ì•ŠëŠ”ê°€?

#### ê²€ì¦ ê²°ê³¼:
```python
# engine.py Line 239-249: 14:59ë¶€í„° ê°•ì œ ì²­ì‚°
elif 'volume_spike' in strategy_id:
    if (now.hour == 14 and now.minute >= 59) or now.hour >= 15:
        # âœ… 14:59ë¶€í„° ì²­ì‚° ì‹œìž‘
        sell_signal = {
            'strategy_id': 'forced_liquidation_1500',
            ...
        }
```

**ðŸŸ¢ ì •ìƒ ìž‘ë™ í™•ì¸**
- 14:59ë¶€í„° ì²­ì‚° ì‹œìž‘ (1ë¶„ ì—¬ìœ )
- ê°•ì œ ì²­ì‚° í›„ `continue`ë¡œ ì „ëžµ ì‹¤í–‰ ê±´ë„ˆë›°ì–´ ì¶©ëŒ ë°©ì§€

---

### 5. 15:00-15:03 ì¢…ê°€ë§¤ë§¤ (Closing Price Advanced Screener)

#### ê²€ì¦ í•­ëª©:
- âœ… ì¡°ê±´ì´ ì•ˆë˜ì–´ë„ 15:00ì— ë¡œì§ì´ ì‹œìž‘ë˜ëŠ”ê°€?
- âœ… 15:03ê¹Œì§€ ë‹¤ë¥¸ ì‹ í˜¸ì™€ ì¶©ëŒí•˜ì§€ ì•ŠëŠ”ê°€?
- âœ… Top 3 ì„ ì •ì´ ì •ìƒì ìœ¼ë¡œ ë˜ëŠ”ê°€?
- âœ… ì›¹í›…ì´ ì •ìƒì ìœ¼ë¡œ ë°œì†¡ë˜ëŠ”ê°€?
- âœ… ë§¤ìˆ˜ê°€ ì •ìƒì ìœ¼ë¡œ ì´ë£¨ì–´ì§€ëŠ”ê°€?

#### ê²€ì¦ ê²°ê³¼:
```python
# engine.py Line 225-227: ì¢…ê°€ë§¤ë§¤ ì‹œê°„ ì²´í¬
is_closing_time = self.market_clock.is_market_closing_approach(now)
await self._run_strategies(data_payload, closing_call=is_closing_time)

# engine.py Line 155-160: closing_call=Trueì¼ ë•Œë§Œ ì¢…ê°€ë§¤ë§¤ ì „ëžµ ì‹¤í–‰
if closing_call != is_closing_strategy:
    continue  # âœ… ë‹¤ë¥¸ ì „ëžµê³¼ ì™„ì „ ë¶„ë¦¬
```

**âœ… ê²€ì¦ ì™„ë£Œ:**
```python
# clock.py Line 52-62: ì¢…ê°€ë§¤ë§¤ ì‹œê°„ í™•ì¸
def is_market_closing_approach(self, now: datetime.datetime = None) -> bool:
    current_time = now.time()
    return self._closing_call_start_time <= current_time < self._market_close_time
    # âœ… 15:00:00 <= current_time < 15:30:00

# config.yaml: closing_call_start: '15:00:00'
# âœ… 15:00ë¶€í„° ì¢…ê°€ë§¤ë§¤ ì „ëžµ ì‹¤í–‰ í™•ì¸
```

**ðŸŸ¢ ì •ìƒ ìž‘ë™ í™•ì¸**
- 15:00-15:30 ì‚¬ì´ì—ë§Œ ì¢…ê°€ë§¤ë§¤ ì „ëžµ ì‹¤í–‰
- ë‹¤ë¥¸ ì „ëžµê³¼ ì™„ì „ížˆ ë¶„ë¦¬ë¨ (`is_closing_strategy` í”Œëž˜ê·¸)
- Top 3 ì„ ì • ë¡œì§ì€ `closing_price_advanced_screener.py`ì— êµ¬í˜„ë¨

---

### 6. ë””ìŠ¤ì½”ë“œ ì›¹í›…

#### ê²€ì¦ í•­ëª©:
- âœ… ì²´ê²° ì•Œë¦¼ì´ ì •ìƒì ìœ¼ë¡œ ë°œì†¡ë˜ëŠ”ê°€?
- âœ… ì¤‘ê°„ì¤‘ê°„ ìƒíƒœ í™•ì¸ì´ ê°€ëŠ¥í•œê°€?

#### ê²€ì¦ ê²°ê³¼:
```python
# engine.py Line 77-141: ìƒì„¸í•œ ì²´ê²° ì•Œë¦¼ êµ¬í˜„
embed = {
    "title": title,
    "color": color,
    "fields": fields,  # âœ… ìˆ˜ëŸ‰, ê°€ê²©, ê¸ˆì•¡, ìž”ê³  ë“± ìƒì„¸ ì •ë³´
    "footer": {"text": f"ì²´ê²° ì‹œê°„: {dt.datetime.now().strftime('%Y-%m-%d %H:%M:%S')}"}
}
self.notifier.send_alert(f"{emoji} {title}", embed=embed)

# ê¸°íƒ€ ì•Œë¦¼:
# - Line 105: ìž¥ ì‹œìž‘ ì•Œë¦¼
# - Line 278: ìž¥ ì¢…ë£Œ ì•Œë¦¼
# - Line 172: ì „ëžµ ì‹¤í–‰ ì˜¤ë¥˜ ì•Œë¦¼
```

**ðŸŸ¢ ì •ìƒ ìž‘ë™ í™•ì¸**
- ë§¤ìˆ˜/ë§¤ë„ ì²´ê²° ì‹œ ìƒì„¸ ì•Œë¦¼ (ìˆ˜ëŸ‰, ê°€ê²©, ìž”ê³  ë“±)
- ìž¥ ì‹œìž‘/ì¢…ë£Œ ì•Œë¦¼
- ì˜¤ë¥˜ ë°œìƒ ì‹œ ì•Œë¦¼
- ì´ëª¨ì§€ì™€ ìƒ‰ìƒìœ¼ë¡œ êµ¬ë¶„

---

### 7. ë¡œê·¸ ìž‘ì„± ë° í•™ìŠµ ë°ì´í„°

#### ê²€ì¦ í•­ëª©:
- âœ… ì‹ í˜¸ ë¡œê·¸ê°€ ì •ìƒì ìœ¼ë¡œ ê¸°ë¡ë˜ëŠ”ê°€?
- âœ… ìž¥ ì¢…ë£Œ í›„ ë¦¬í¬íŠ¸ê°€ ìƒì„±ë˜ëŠ”ê°€?
- âœ… í•™ìŠµ ë°ì´í„°ë¡œ í™œìš© ê°€ëŠ¥í•œê°€?

#### ê²€ì¦ ê²°ê³¼:
```python
# engine.py Line 166: ì‹ í˜¸ ë¡œê¹…
signals_logger.info(signal)  # âœ… ëª¨ë“  ì‹ í˜¸ ê¸°ë¡

# engine.py Line 274-283: ì¼ì¼ ë¦¬í¬íŠ¸ ìƒì„±
try:
    report_generator = ReportGenerator(config=self.config, notifier=self.notifier)
    report_generator.generate_daily_report()  # âœ… ì¼ì¼ ë¦¬í¬íŠ¸
except Exception as e:
    logger.error(f"ì¼ì¼ ë¦¬í¬íŠ¸ ìƒì„± ì‹¤íŒ¨: {e}", exc_info=True)
```

**ðŸŸ¢ ì •ìƒ ìž‘ë™ í™•ì¸**
- `signals_logger`ë¡œ ëª¨ë“  ë§¤ë§¤ ì‹ í˜¸ ê¸°ë¡
- `ReportGenerator`ë¡œ ì¼ì¼ ë¦¬í¬íŠ¸ ìƒì„±
- ë¡œê·¸ íŒŒì¼: `logs/signals_YYYYMMDD.log`

---

### 8. ìœ ëª©ë¯¼ ê³µë¶€ë²• ìžë™ ì—…ë¡œë“œ

#### ê²€ì¦ í•­ëª©:
- âœ… ìž¥ ì¢…ë£Œ í›„ ìžë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ”ê°€?
- âœ… GitHubì— ì •ìƒì ìœ¼ë¡œ í‘¸ì‹œë˜ëŠ”ê°€?
- âœ… ì¤‘ë³µ ì‹¤í–‰ì´ ë°©ì§€ë˜ëŠ”ê°€?

#### ê²€ì¦ ê²°ê³¼:
```python
# engine.py Line 285-293: ìœ ëª©ë¯¼ ê³µë¶€ë²• ìžë™ ì‹¤í–‰
try:
    now = dt.datetime.now()
    force_run = now.hour <= 16 and now.minute <= 30  # âœ… 16:30ê¹Œì§€ëŠ” ê°•ì œ ì‹¤í–‰
    run_daily_study(broker=self.broker, notifier=self.notifier, force_run=force_run)
except Exception as e:
    logger.error(f"ë°ì¼ë¦¬ ìŠ¤í„°ë”” ìžë£Œ ìƒì„± ì‹¤íŒ¨: {e}", exc_info=True)
```

**ðŸŸ¢ ì •ìƒ ìž‘ë™ í™•ì¸**
- `_process_post_market_logic()`ì—ì„œ ìž¥ ì¢…ë£Œ í›„ ìžë™ ì‹¤í–‰
- `force_run` ë¡œì§ìœ¼ë¡œ 16:30ê¹Œì§€ëŠ” ìž¬ì‹¤í–‰ ê°€ëŠ¥
- study.pyì˜ `auto_commit_to_github()` í•¨ìˆ˜ë¡œ GitHub ìžë™ í‘¸ì‹œ
- DB ì¤‘ë³µ ì²´í¬ë¡œ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€

---

## ðŸŽ¯ ì¢…í•© í‰ê°€

### âœ… ì •ìƒ ìž‘ë™ í™•ì¸ í•­ëª© (8/8)
1. âœ… 09:00-09:30 ì „ëžµ (Opening Breakout)
2. âœ… 09:30 ê°•ì œ ë§¤ë„
3. âœ… 09:30-14:50 ì „ëžµ (Volume Spike)
4. âœ… 15:00 ì „ ê°•ì œ ë§¤ë„
5. âœ… 15:00-15:03 ì¢…ê°€ë§¤ë§¤
6. âœ… ë””ìŠ¤ì½”ë“œ ì›¹í›…
7. âœ… ë¡œê·¸ ìž‘ì„±
8. âœ… ìœ ëª©ë¯¼ ê³µë¶€ë²• ìžë™ ì—…ë¡œë“œ

### âœ… ëª¨ë“  í•µì‹¬ í•­ëª© ê²€ì¦ ì™„ë£Œ
- MarketClock.is_market_closing_approach() ë©”ì„œë“œ: 15:00-15:30 ì •í™•ížˆ ê°ì§€
- ê°•ì œ ì²­ì‚° ë¡œì§: 09:29, 14:59ë¶€í„° ì‹œìž‘ (ì¶©ë¶„í•œ ì—¬ìœ )
- ì‹œê°„ëŒ€ë³„ ì „ëžµ ë¶„ë¦¬: ì™„ë²½í•˜ê²Œ êµ¬í˜„ë¨
- ë””ìŠ¤ì½”ë“œ ì•Œë¦¼: ìƒì„¸í•œ ì²´ê²° ì •ë³´ ì „ì†¡

---

## ðŸ›¡ï¸ ì•ˆì „ìž¥ì¹˜ ìš”ì•½

### 1. ì‹œê°„ëŒ€ë³„ ì¶©ëŒ ë°©ì§€
```python
# ê°•ì œ ì²­ì‚° ìš°ì„  ì²˜ë¦¬
liquidated = await self._check_forced_liquidation()
if liquidated:
    continue  # ì „ëžµ ì‹¤í–‰ ê±´ë„ˆë›°ê¸°

# ì „ëžµ ë¶„ë¦¬ ì‹¤í–‰
if closing_call != is_closing_strategy:
    continue
```

### 2. ê°•ì œ ì²­ì‚° ì—¬ìœ  ì‹œê°„
- 09:29ë¶€í„° opening_breakout ì²­ì‚° ì‹œìž‘ (1ë¶„ ì—¬ìœ )
- 14:59ë¶€í„° volume_spike ì²­ì‚° ì‹œìž‘ (1ë¶„ ì—¬ìœ )

### 3. ì˜¤ë¥˜ ì²˜ë¦¬
- ëª¨ë“  ì£¼ìš” ë¡œì§ì— try-except ë¸”ë¡
- ì˜¤ë¥˜ ë°œìƒ ì‹œ Discord ì•Œë¦¼
- ë¡œê·¸ ê¸°ë¡ìœ¼ë¡œ ì¶”ì  ê°€ëŠ¥

### 4. ì²´ê²° í™•ì¸
- ë°±ê·¸ë¼ìš´ë“œ `_poll_for_fills()` ìž‘ì—…ìœ¼ë¡œ 15ì´ˆë§ˆë‹¤ ì²´ê²° í™•ì¸
- ë™ì‹œí˜¸ê°€ ì‹œê°„(15:20-15:30) ì œì™¸
- ì¤‘ë³µ ì²´ê²° ì²˜ë¦¬ ë°©ì§€ (`_processed_fill_ids`)

---

## ðŸ“ ê¶Œìž¥ ì‚¬í•­

### 1. ì¶”ê°€ ê²€ì¦ í•„ìš”
```python
# market_clock.py í™•ì¸ í•„ìš”
def is_market_closing_approach(self, now):
    # 15:00-15:03 ì‚¬ì´ë¥¼ ì •í™•ížˆ ê°ì§€í•˜ëŠ”ì§€ í™•ì¸
    pass
```

### 2. ëª¨ë‹ˆí„°ë§ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] 09:00 ì •ê°ì— í¬ì§€ì…˜ ì²­ì‚° í™•ì¸
- [ ] 09:29-09:30 ì‚¬ì´ opening_breakout ì²­ì‚° í™•ì¸
- [ ] 14:59-15:00 ì‚¬ì´ volume_spike ì²­ì‚° í™•ì¸
- [ ] 15:00-15:03 ì‚¬ì´ ì¢…ê°€ë§¤ë§¤ ì‹¤í–‰ í™•ì¸
- [ ] Discord ì•Œë¦¼ ìˆ˜ì‹  í™•ì¸
- [ ] ë¡œê·¸ íŒŒì¼ ìƒì„± í™•ì¸ (`logs/` í´ë”)
- [ ] ìœ ëª©ë¯¼ ê³µë¶€ë²• GitHub í‘¸ì‹œ í™•ì¸

### 3. í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
1. **ê°œìž¥ ì „ (08:50)**: ì‹œìŠ¤í…œ ì‹œìž‘, ì´ˆê¸°í™” í™•ì¸
2. **09:00**: ì „ë‚  í¬ì§€ì…˜ ì²­ì‚° í™•ì¸
3. **09:00-09:28**: opening_breakout ì „ëžµ ì‹¤í–‰ í™•ì¸
4. **09:29**: ê°•ì œ ì²­ì‚° ì‹œìž‘ í™•ì¸
5. **09:30-14:58**: volume_spike ì „ëžµ ì‹¤í–‰ í™•ì¸
6. **14:59**: ê°•ì œ ì²­ì‚° ì‹œìž‘ í™•ì¸
7. **15:00-15:03**: ì¢…ê°€ë§¤ë§¤ ì „ëžµ ì‹¤í–‰ í™•ì¸
8. **15:30 ì´í›„**: ìœ ëª©ë¯¼ ê³µë¶€ë²• ìžë™ ì‹¤í–‰ í™•ì¸

---

## ðŸš¨ ì£¼ì˜ì‚¬í•­

1. **ë™ì‹œí˜¸ê°€ ì‹œê°„ (15:20-15:30)**
   - ì²´ê²° ì¡°íšŒ API ìž‘ë™ ì•ˆ í•¨
   - ì´ ì‹œê°„ëŒ€ëŠ” ì²´ê²° í™•ì¸ ìŠ¤í‚µë¨

2. **GitHub í‘¸ì‹œ**
   - ì¸ì½”ë”© ë¬¸ì œ í•´ê²°ë¨ (UTF-8)
   - ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ ë¡œê·¸ë§Œ ê¸°ë¡í•˜ê³  ê³„ì† ì§„í–‰

3. **ê°•ì œ ì²­ì‚° íƒ€ì´ë°**
   - 1ë¶„ ì—¬ìœ ë¥¼ ë‘ê³  ìžˆì§€ë§Œ, ì²´ê²° ì§€ì—° ê°€ëŠ¥ì„± ìžˆìŒ
   - í•„ìš” ì‹œ 2-3ë¶„ ì „ë¶€í„° ì‹œìž‘í•˜ë„ë¡ ì¡°ì • ê°€ëŠ¥

---

## âœ… ê²°ë¡ 

**ì „ì²´ ì‹œìŠ¤í…œì´ ì•ˆì „í•˜ê³  ë…¼ë¦¬ì ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìžˆìŠµë‹ˆë‹¤.**

- ì‹œê°„ëŒ€ë³„ ì¶©ëŒ ë°©ì§€ ë©”ì»¤ë‹ˆì¦˜ âœ…
- ê°•ì œ ì²­ì‚° ì•ˆì „ìž¥ì¹˜ âœ…
- ìƒì„¸í•œ ë¡œê¹… ë° ì•Œë¦¼ âœ…
- ì˜¤ë¥˜ ì²˜ë¦¬ ë° ë³µêµ¬ âœ…

**ë‚´ì¼ ì•„ì¹¨ ì‹¤ì „ ìš´ì˜ ì¤€ë¹„ ì™„ë£Œ!** ðŸš€
